# ==============================================================================
# Political Sphere â€” PR Checks (Caller)
# ==============================================================================
# Wrapper workflow that binds pull_request events to the reusable PR Checks.
# ==============================================================================

name: PR Checks

# ==============================================================================
# TRIGGER
# ------------------------------------------------------------------------------
# Run on key PR lifecycle events that affect code or CI signal.
# - opened/reopened: initial gate execution
# - synchronize: new commits pushed to the PR branch
# ==============================================================================
on:
  pull_request:
    types: [opened, reopened, synchronize]

# ==============================================================================
# DEFAULT PERMISSIONS (LEAST PRIVILEGE)
# ==============================================================================
permissions:
  contents: read

jobs:
  call:
    name: PR Checks
    uses: ./.github/workflows/_reusable-pr-checks.yml
    permissions:
      contents: read
      pull-requests: write
    with:
      runner: ubuntu-22.04
      node_version: "22"
      fetch_depth: 1
      pr_number: ${{ github.event.pull_request.number }}
      pr_is_fork: ${{ github.event.pull_request.head.repo.fork && 'true' || 'false' }}
      allow_pr_comments: ${{ github.event.pull_request.head.repo.fork && '0' || '1' }}
      pr_base_ref: ${{ github.event.pull_request.base.sha }}
      pr_head_ref: ${{ github.event.pull_request.head.sha }}
