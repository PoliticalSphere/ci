# ==============================================================================
# Political Sphere â€” PR Checks (Caller)
# ==============================================================================
#
# METADATA
# ------------------------------------------------------------------------------
# id: pr-checks
# version: 1.0.0
# owner: political-sphere
# classification: internal
#
# PURPOSE
# ------------------------------------------------------------------------------
# Binds pull_request events to the reusable PR Checks workflow for
# triggering on opened, reopened, and synchronize events.
#
#
# SCOPE & RESPONSIBILITIES
# ------------------------------------------------------------------------------
# DOES:
#   - Trigger PR Checks workflow on pull request events
#   - Bind pull_request trigger to _reusable-pr-checks.yml
#
# DOES NOT:
#   - Perform checks directly
#   - Modify repository state
#
#
# DEPENDENCIES
# ------------------------------------------------------------------------------
# - ./.github/workflows/_reusable-pr-checks.yml
#
#
# EXECUTION MODEL
# ------------------------------------------------------------------------------
# - Trigger: pull_request (opened, reopened, synchronize)
# - Delegates to _reusable-pr-checks.yml
#
#
# SECURITY & POLICY NOTES
# ------------------------------------------------------------------------------
# - Permissions: minimal (contents: read)
# - Platform ref must be SHA-pinned for supply chain security
#
# ==============================================================================

name: PR Checks

# ==============================================================================
# TRIGGER
# ------------------------------------------------------------------------------
# Run on key PR lifecycle events that affect code or CI signal.
# - opened/reopened: initial gate execution
# - synchronize: new commits pushed to the PR branch
#
# Path filtering:
# - paths-ignore skips CI for docs-only changes, saving compute resources.
# - If you need to run CI for docs, remove or adjust paths-ignore.
# ==============================================================================
on:
  pull_request:
    types: [opened, reopened, synchronize]
    paths-ignore:
      - "**.md"
      - "docs/**"
      - "branding/**/*.txt"
      - ".github/ISSUE_TEMPLATE/**"
      - ".github/PULL_REQUEST_TEMPLATE/**"
      - "LICENSE"
      - "CODE_OF_CONDUCT.md"
      - "CONTRIBUTING.md"
      - "SECURITY.md"

# ==============================================================================
# DEFAULT PERMISSIONS (LEAST PRIVILEGE)
# ==============================================================================
permissions:
  contents: read  # Justification: required for repository checkout only

jobs:
  call:
    name: PR Checks
    uses: ./.github/workflows/_reusable-pr-checks.yml
    permissions:
      contents: read
      pull-requests: write
    with:
      runner: ubuntu-22.04
      node_version: "22"
      fetch_depth: 1
      pr_number: ${{ github.event.pull_request.number }}
      pr_is_fork: ${{ github.event.pull_request.head.repo.fork && 'true' || 'false' }}
      allow_pr_comments: ${{ github.event.pull_request.head.repo.fork && '0' || '1' }}
      pr_base_ref: ${{ github.event.pull_request.base.sha }}
      pr_head_ref: ${{ github.event.pull_request.head.sha }}
