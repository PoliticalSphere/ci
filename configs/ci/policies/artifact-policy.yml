# ==============================================================================
# Political Sphere â€” Artifact Policy
# ------------------------------------------------------------------------------
# Purpose:
#   Define required and allowed artifacts emitted by CI workflows.
#   validate-ci enforces these rules to keep output consistent and auditable.
# ==============================================================================

meta:
  version: 1.0.0
  owner: political-sphere
  classification: internal
  last_reviewed: 2025-12-19
  review_interval_days: 180

policy:
  default_retention_days: 7
  require_artifacts_for_ci: true
  required_paths:
    - reports/**
    - logs/**

allowlist:
  pr-gates:
    - name: pr-gates-validate-ci
    - name: pr-gates-lint
    - name: pr-gates-typecheck
    - name: pr-gates-tests
    - name: pr-gates-coverage
    - name: pr-gates-test-results
    - name: pr-gates-jscpd
    - name: pr-gates-build
    - name: pr-gates-secrets
    - name: pr-gates-summary
    - name: pr-gates-sonar
    - name: pr-gates-dependency-review
    - name: pr-gates-notify
  build-artifacts:
    - name: build-artifacts
    - name: build-artifacts-validate-ci
    - name: build-artifacts-summary
    - name: platform-snapshot
    - name: ${{ env.PS_ARTIFACT_PREFIX }}
    - name: ${{ env.PS_ARTIFACT_PREFIX }}-summary
  security-scheduled:
    - name: security-scheduled-validate-ci
    - name: security-secrets
    - name: codeql-sarif
    - name: semgrep-sarif
    - name: scorecard-sarif
    - name: trufflehog-sarif
    - name: trivy-sarif
    - name: security-scheduled-summary
  license-compliance:
    - name: license-compliance-validate-ci
    - name: license-compliance-report
    - name: license-compliance-summary
  consumer-contract:
    - name: consumer-contract-validate-ci
    - name: consumer-contract-report
    - name: consumer-contract-summary
  release:
    - name: release-validate-ci
    - name: release-artifacts
    - name: release-summary
    - name: release-dry-run
